(function(t){function e(e){for(var n,s,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);m&&m(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],n=!0,s=1;s<o.length;s++){var i=o[s];0!==a[i]&&(n=!1)}n&&(r.splice(e--,1),t=c(c.s=o[0]))}return t}var n={},s={app:0},a={app:0},r=[];function i(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"bb7b8bb6"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.e=function(t){var e=[],o={about:1};s[t]?e.push(s[t]):0!==s[t]&&o[t]&&e.push(s[t]=new Promise((function(e,o){for(var n="css/"+({about:"about"}[t]||t)+"."+{about:"ac79f9d7"}[t]+".css",a=c.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var l=r[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===a))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===n||u===a)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var n=e&&e.target&&e.target.src||a,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete s[t],m.parentNode.removeChild(m),o(r)},m.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){s[t]=0})));var n=a[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,o){n=a[t]=[e,o]}));e.push(n[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(m);var o=a[t];if(0!==o){if(o){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",d.name="ChunkLoadError",d.type=n,d.request=s,o[1](d)}a[t]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,o){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(o,n,function(e){return t[e]}.bind(null,n));return o},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var m=u;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("64a9"),s=o.n(n);s.a},"4c0b":function(t,e,o){"use strict";var n=o("fa37"),s=o.n(n);s.a},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d"),o("f9e3");var n=o("5f5b"),s=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/"}},[t._v("Список задач")]),t._v(" |\n    "),o("router-link",{attrs:{to:"/about"}},[t._v("О странице")])],1),o("router-view")],1)},r=[],i=(o("034f"),o("2877")),c={},l=Object(i["a"])(c,a,r,!1,null,null,null),u=l.exports,d=o("8c4f"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("username",{attrs:{name:t.userName,showCollapse:t.showNameRequest},on:{resetPage:t.resetPage}}),t.userName?o("div",[o("p",[t._v("Задач в вашем списке - "+t._s(t.todosCounter))]),o("p",[t._v("Из них пока не выполнено - "+t._s(t.uncompleteTodosCounter))])]):t._e(),t.userName?o("addtask",{attrs:{userName:t.userName,url:t.todoListURL},on:{addedTask:t.addedTask}}):t._e(),o("changetask",{attrs:{taskID:t.taskID,show:t.showChangeTaskModal,oldDescription:this.oldDescription},on:{changedTask:t.changedTask,closeModal:function(e){t.showChangeTaskModal=!1}}}),o("confirmation",{attrs:{message:t.confirmationMessage,showCollapse:t.showConfirmation},on:{hideConfirmation:t.hideConfirmation}}),t.userName?o("todotable",{attrs:{todos:t.todos},on:{changeThisTask:t.changeThisTask,doComplete:t.doComplete,doRemote:t.doRemote}}):t._e()],1)},f=[],p=(o("6762"),o("2fdb"),o("bc3a")),h=o.n(p),b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-collapse",{staticClass:"mt-2 collapse",attrs:{id:"collapse-333"},model:{value:t.showCollapse,callback:function(e){t.showCollapse=e},expression:"showCollapse"}},[o("b-card",[o("b-alert",{staticClass:"w-100",attrs:{dismissible:""},model:{value:t.showCollapse,callback:function(e){t.showCollapse=e},expression:"showCollapse"}},[t._v("\n        "+t._s(t.message)+"\n        "),o("b",[t._v("⇒")])])],1)],1)],1)},v=[],g={props:["message","showCollapse"]},C=g,w=Object(i["a"])(C,b,v,!1,null,"2a70bc1f",null),_=w.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("table",{staticClass:"table table-bordered"},[t._m(0),o("tbody",t._l(t.todos,(function(e,n){return o("tr",{key:n,attrs:{id:e.uid}},[o("td",{staticClass:"todo-id",class:{"is-completed":e.is_completed}},[t._v(t._s(n+1))]),o("td",{staticClass:"description",class:{"is-completed":e.is_completed},on:{dblclick:t.changeThisTask}},[t._v(t._s(e.desc))]),o("td",{staticClass:"makeCompleted",class:{"is-completed":e.is_completed}},[o("b-form-checkbox",{attrs:{switch:"",size:"lg"},on:{change:function(o){return t.doComplete(e.uid,e.is_completed)}},model:{value:e.is_completed,callback:function(o){t.$set(e,"is_completed",o)},expression:"todo.is_completed"}})],1),o("td",{staticClass:"makeDeleted",class:{"is-completed":e.is_completed}},[o("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button",size:"lg"},on:{click:function(o){return t.doRemote(e.uid,e.desc)}}},[t._v("X")])])])})),0)])])},T=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",{},[o("tr",[o("th",[t._v("№")]),o("th",[t._v("Задача")]),o("th",[t._v("Выполнить")]),o("th",[t._v("Удалить")])])])}],y={data:function(){return{id:"",tasksEvent:""}},props:["todos"],methods:{changeThisTask:function(t){var e={};e.taskID=event.target.parentElement.id,e.taskEvent=event.target.className,e.description=event.target.innerHTML,this.$emit("changeThisTask",e)},doComplete:function(t,e){var o={};o.uid=t,o.is_completed=!e,this.$emit("doComplete",o)},doRemote:function(t,e){var o={};o.uid=t,o.is_deleted=!0,o.desc=e,this.$emit("doRemote",o)}},components:{}},N=y,M=(o("4c0b"),Object(i["a"])(N,k,T,!1,null,"6b601d66",null)),D=M.exports,x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-collapse",{staticClass:"mt-2 collapse",attrs:{id:"collapse-333"},model:{value:t.showCollapse,callback:function(e){t.showCollapse=e},expression:"showCollapse"}},[o("b-card",[o("p",[t._v("Представьтесь пожалуйста!")]),o("b-form",{attrs:{inline:""},on:{submit:t.onSubmit}},[o("b-form-input",{attrs:{id:"form-description-input",required:"",type:"text",placeholder:"Имя"},model:{value:t.form.uname,callback:function(e){t.$set(t.form,"uname",e)},expression:"form.uname"}}),o("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Сохранить")])],1)],1)],1),t.name?o("b-form",{attrs:{id:"itsNotMe",inline:""},on:{submit:t.resetName}},[o("h2",[t._v("Здравствуйте, "+t._s(t.name))]),o("b-button",{attrs:{type:"submit",variant:"outline-primary"}},[t._v("Ой, это не я!")])],1):t._e()],1)},E=[],$={data:function(){return{form:{uname:""}}},props:["name","showCollapse"],methods:{onSubmit:function(t){t.preventDefault(),localStorage.setItem("userName",this.form.uname),this.$emit("resetPage","")},resetName:function(){localStorage.removeItem("userName"),this.$emit("resetPage","")}},created:function(){}},O=$,P=(o("da56"),Object(i["a"])(O,x,E,!1,null,"506ce15f",null)),R=P.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.todo-modal",modifiers:{"todo-modal":!0}}],staticClass:"btn btn-sm align-left d-block w-100",attrs:{type:"button",id:"task-add",variant:"outline-secondary"}},[t._v("Добавить задачу")]),o("b-modal",{ref:"addTodoModal",attrs:{id:"todo-modal",title:"Добавить задачу","hide-footer":""}},[o("b-form",{staticClass:"w-100",on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"form-description-group",label:"Описание:","label-for":"form-description-input"}},[o("b-form-input",{attrs:{id:"form-description-input",type:"text",required:"",placeholder:"Завести задачу"},model:{value:t.addTodoForm.description,callback:function(e){t.$set(t.addTodoForm,"description",e)},expression:"addTodoForm.description"}})],1),o("b-form-group",{attrs:{id:"form-complete-group"}}),o("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Добавить")]),o("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Сброс")])],1)],1)],1)},S=[],F={data:function(){return{addTodoForm:{description:""}}},props:["url","userName"],methods:{onSubmit:function(t){var e=this;t.preventDefault(),this.$refs.addTodoModal.hide();var o={description:this.addTodoForm.description};h.a.post(this.url+this.userName,o).then((function(){e.$emit("addedTask",o.description)})),this.resetForm()},onReset:function(t){t.preventDefault(),this.$refs.addTodoModal.hide(),this.resetForm()},resetForm:function(){this.addTodoForm.description=""}}},I=F,L=Object(i["a"])(I,j,S,!1,null,null,null),q=L.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-modal",{ref:"changeTodoModal",attrs:{id:"change-modal",title:"Изменить задачу","hide-footer":""},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[o("b-form",{staticClass:"w-100",on:{submit:t.onSubmit,reset:t.onReset}},[o("b-form-group",{attrs:{id:"form-description-group",label:"Описание:","label-for":"form-description-input"}},[o("b-form-input",{attrs:{id:"form-description-input",type:"text",required:"",placeholder:"Изменить задачу"},model:{value:t.oldDescription,callback:function(e){t.oldDescription=e},expression:"oldDescription"}})],1),o("b-form-group",{attrs:{id:"form-complete-group"}}),o("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Изменить")]),o("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Отмена")])],1)],1)],1)},A=[],B={data:function(){return{changeTodoForm:{description:"",uid:""}}},props:["taskID","show","oldDescription"],methods:{onSubmit:function(t){t.preventDefault();var e={description:this.oldDescription,uid:this.taskID};this.$emit("changedTask",e)},onReset:function(t){console.log("changeTask onReset"),t.preventDefault(),this.resetForm(),this.showModal=!1},resetForm:function(){console.log("changeTask resetForm"),this.changeTodoForm.description=""}},computed:{showModal:{get:function(){return this.show},set:function(t){console.log(t),this.$emit("closeModal")}}}},H=B,z=Object(i["a"])(H,U,A,!1,null,null,null),J=z.exports,K="http://localhost:8000/api/tasks/",X={name:"Home",data:function(){return{todos:{},todosCounter:0,uncompleteTodosCounter:0,confirmationMessage:"",showConfirmation:!1,showNameRequest:!1,todoListURL:K,id:"",event:"",showChangeTaskModal:!1,taskID:"",oldDescription:"",userName:""}},methods:{getUserName:function(){this.userName=localStorage.getItem("userName"),null!=this.userName?(this.showNameRequest=!1,console.log("userName = ".concat(this.userName)),this.getTodos()):this.showNameRequest=!0},getTodos:function(){var t=this;h.a.get("".concat(K).concat(this.userName)).then((function(e){t.todos=e.data.tasks,t.todosCounter=t.todos.length,t.uncompleteTodosCounter=t.getUncompleteTodosCounter()})).catch((function(e){t.confirmationMessage='Ошибка подключения к серверу "'.concat(e,'". Попробуйте позднее.'),t.showConfirmation=!0,setTimeout((function(){t.getTodos(),t.showConfirmation=!1}),2e4)}))},resetPage:function(){this.getUserName(),console.log("Получили событие resetPage")},addedTask:function(t){var e=this;this.resetPage(),this.confirmationMessage='Задача "'.concat(t,'" добавлена'),this.showConfirmation=!0,setTimeout((function(){e.showConfirmation=!1}),2e4)},changeThisTask:function(t){this.taskID=t.taskID,this.taskEvent=t.taskEvent,this.oldDescription=t.description,this.taskEvent.includes("description")&&(this.taskDescription=t.description,this.showChangeTaskModal=!0)},changedTask:function(t){var e=this;this.showChangeTaskModal=!1,h.a.put("".concat(K).concat(this.userName),t).then((function(){e.resetPage(),e.confirmationMessage='Задача "'.concat(e.oldDescription,'" изменена на "').concat(t.description,'".'),e.showConfirmation=!0,setTimeout((function(){e.showConfirmation=!1}),2e4)})).catch((function(t){e.confirmationMessage='Ошибка подключения к серверу "'.concat(t,'". Попробуйте позднее.'),e.showConfirmation=!0,setTimeout((function(){e.doComplete(event),e.showConfirmation=!1}),15e3)}))},doComplete:function(t){var e=this;console.log("home doComplete"),console.log(t),h.a.put("".concat(K).concat(this.userName),t).then((function(){e.uncompleteTodosCounter=e.getUncompleteTodosCounter()})).catch((function(o){e.confirmationMessage='Ошибка подключения к серверу "'.concat(o,'". Попробуйте позднее.'),e.showConfirmation=!0,setTimeout((function(){e.doComplete(t),e.showConfirmation=!1}),2e4)}))},doRemote:function(t){var e=this;console.log("home doRemote"),console.log(t),h.a.put("".concat(K).concat(this.userName),t).then((function(){e.resetPage(),e.confirmationMessage='Задача "'.concat(t.desc,'" удалена.'),e.showConfirmation=!0,setTimeout((function(){e.showConfirmation=!1}),2e4)})).catch((function(o){e.confirmationMessage='Ошибка подключения к серверу "'.concat(o,'". Попробуйте позднее.'),e.showConfirmation=!0,setTimeout((function(){e.doRemote(t),e.showConfirmation=!1}),2e4)}))},hideConfirmation:function(){this.showConfirmation=!1},getUncompleteTodosCounter:function(){var t=0;for(var e in this.todos)!1===this.todos[e].is_completed&&t++;return t}},components:{confirmation:_,todotable:D,username:R,addtask:q,changetask:J},created:function(){this.getUserName()}},G=X,Q=(o("f656"),Object(i["a"])(G,m,f,!1,null,"0f2df07c",null)),V=Q.exports;s["default"].use(d["a"]);var W=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:V},{path:"/about",name:"about",component:function(){return o.e("about").then(o.bind(null,"f820"))}}]});s["default"].use(n["a"]),s["default"].config.productionTip=!1,new s["default"]({router:W,render:function(t){return t(u)}}).$mount("#app")},"64a9":function(t,e,o){},6885:function(t,e,o){},8564:function(t,e,o){},da56:function(t,e,o){"use strict";var n=o("6885"),s=o.n(n);s.a},f656:function(t,e,o){"use strict";var n=o("8564"),s=o.n(n);s.a},fa37:function(t,e,o){}});
//# sourceMappingURL=app.e1359620.js.map